<script>
  $("#site-nav .promo-bottom").each(function () {
      var $this = $(this),
          isRecognized = getCookie("fdRecognized") !== undefined;
  
      if ($this.is(":empty")) {
          // Check for specific date range and relevant classes
          if (
              checkDate >= "241028" &&
              checkDate <= "241123" &&
              ($this.parents(".top-items").hasClass("top-men") ||
               $this.parents(".top-items").hasClass("top-women") ||
               $this.parents(".top-items").hasClass("top-eg") ||
               $this.parents(".top-items").hasClass("top-sg") ||
               $this.parents(".top-items").hasClass("top-ps"))
          ) {
              $this.attr("style", "cursor: pointer");
  
              // If it's the top-sg category, show a specific message
              if (isRecognized) {
                if ($this.parents(".top-items").hasClass("top-sg")) {
                  $this.append( '<div class="size-14" P-2>Up to</div> <div class="weight-bold size-20">50% OFF FRAMES</div>');
                  $this.css("background", "linear-gradient(to left, #DF785B, #E99C77)");
                  $this.on("click", function () {
                      window.location.href = "/email/black-friday-dp";
                  });
                } else {
                  $this.append(
                    '<div><p>Up to</p> <span class="weight-bold size-18">50% OFF FRAMES </span></div><span class="weight-bold size-20">+</span><div><p>Up to</p><span class="weight-bold size-20">60% OFF LENSES </span></div>'
                  );
                  $this.css("background", "linear-gradient(to left, #DF785B, #E99C77)");
                  $this.on("click", function () {
                      window.location.href = "/email/black-friday-dp";
                  });
                }
              } else {
                $this.append(
                  '<div class="weight-bold size-21"><a href="javascript:addWelcomeLayer();fdFncs.vars.allowEmPop = false;" class="weight-bold">Sign Up</a> or<br><a href="#" class="siteSignIn weight-bold">Log In</a></div><div class="size-14 mt-2">for Early Black Friday</span></div>'
                );
                $this.css("background", "linear-gradient(to left, #DF785B, #E99C77)");
              }
          } else if ($this.parents(".top-items").hasClass("top-cl")) {
            $this
              .append(
                '<div class="weight-bold size-22 mb-3">Free Shipping</div><div class="size-15">On Contact Lens<br>Orders over $175</div>'
              )
              .attr("style", "cursor: pointer");
            $this.on("click", function () {
              window.location.href = "/contact-lenses/";
            });
          } else if ($this.parents(".top-items").hasClass("top-sale")) {
            $this.append(
              '<div class="size-14">Outlet Deals</div><div class="size-17 pt-2 mt-2" style="line-height: 1; border-top: 1px #fff solid;">Save Up To</div><div class="size-50" style="line-height: 1;">50%</div>'
            );
            $this
              .addClass(
                "background-red color-white weight-bold transform-uppercase"
              )
              .attr("style", "cursor: pointer");
            $this.on("click", function () {
              window.location.href = "/sale/designer-eyewear-outlet-dp";
            });
          } else {
            var rxPromo = promoMsg;
            if (
              fdFncs.custType !== undefined &&
              (fdFncs.custType === "preferred" || fdFncs.custType === "vip")
            ) {
              lensDisc = lensDisc + 5;
            }
            rxPromo +=
              '<div class="weight-bold size-20">+</div><div class="weight-bold size-22">' +
              lensDisc +
              '% Off</div><div class="size-15">Rx Lenses</div>';
    
            //Set FSA/HSA banner instead of lens discount in mega menu
            if (
              (checkDate >= "211226" && checkDate <= "211231") ||
              (checkDate >= "220229" && checkDate <= "220315")
            ) {
              rxPromo =
                '<div class="my-auto"><a href="/collections/fsa-hsa-eligible-eyewear-dp"><div class="weight-bold size-16 mb-2">Use your FSA dollars<br>before they expire!</div></a></div><div class="size-13 bg-almost-black mt-auto"><a class="d-inline-block" href="/knowledge-center/do-you-have-flex-spending-dollars">FSA/HSA</a> | <a class="d-inline-block" href="/knowledge-center/vision-insurance-fsa-eligibility">Insurance</a></div>';
              $this.addClass("pb-0 px-0");
            }
            $this.attr("style", "cursor: pointer");
            if (checkDate >= "211121" && checkDate <= "211126") {
              $this.on("click", function () {
                window.location.href = "/emails/black-friday-deals-dp";
              });
            }
            if (checkDate >= "211127" && checkDate <= "211129") {
              $this.on("click", function () {
                window.location.href = "/emails/cyber-monday-deals-dp";
              });
            } else {
              $this.on("click", function () {
                window.location.href = "/sale/top-brands-discounted-dp";
              });
            }
            $this.append(rxPromo);
          }
      }
  });
  </script>