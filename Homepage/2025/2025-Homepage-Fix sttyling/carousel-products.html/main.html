<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

        <style>
            .best-sellers-container {
                max-width: 1200px;
                margin: 0 auto;
                text-align: center;
                padding: 20px;
            }

            .category-tabs {
                margin: 20px 0;
            }

            .category-tabs .tab {
                padding: 8px 16px;
                margin: 0 5px;
                border: 1px solid #ccc;
                background: white;
                cursor: pointer;
                border-radius: 20px;
            }

            .category-tabs .tab.active {
                background: #000;
                color: white;
            }

            .swiper-container {
                margin: 20px 0;
            }

            .product-card {
                background: white;
                border: 1px solid #ddd;
                border-radius: 8px;
                padding: 15px;
                text-align: center;
                position: relative;
            }

            .product-card img {
                max-width: 100%;
                height: auto;
            }

            .top-label {
                position: absolute;
                top: 10px;
                left: 10px;
                background: red;
                color: white;
                padding: 4px 8px;
                font-size: 12px;
                border-radius: 4px;
            }

            .top-label.bestseller {
                background: #333;
            }

            .brand {
                margin-top: 10px;
                font-weight: bold;
            }

            .product-name {
                margin: 5px 0;
            }

            .price {
                text-decoration: line-through;
                color: #999;
            }

            .discount-price {
                color: #d00;
                font-weight: bold;
                margin-left: 8px;
            }

            .discount-percentage {
                color: red;
                font-size: 12px;
                margin-top: 5px;
            }

            .view-all {
                display: inline-block;
                margin-top: 15px;
                color: #007bff;
                text-decoration: underline;
                cursor: pointer;
            }
        </style>

    </head>

    <body>
        <div class="best-sellers-container">
            <h2>Our best sellers</h2>

            <div class="category-tabs">
                <button class="tab active" data-category="Eyeglasses">Eyeglasses</button>
                <button class="tab" data-category="Prescription Sunglasses">Prescription Sunglasses</button>
                <button class="tab" data-category="Sunglasses">Sunglasses</button>
                <button class="tab" data-category="Contact Lenses">Contact Lenses</button>
                <button class="tab" data-category="AI Glasses">AI Glasses</button>
            </div>

            <div class="swiper-container">
                <div class="swiper-wrapper" id="carousel-wrapper">
                    <!-- Slides will be injected here -->
                </div>

                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>

            <a href="#" class="view-all">View all</a>
        </div>

        <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

    </body>
    <script>
        // Simulated API response
        const fetchProducts = () => {
            return Promise.resolve([
                {
                    "category": "Eyeglasses",
                    "topLabel": "Sale",
                    "image": "https://via.placeholder.com/150",
                    "brand": "Ray-Ban",
                    "name": "Aviator Classic | RB3025",
                    "price": 200,
                    "discountedPrice": 180,
                    "discountPercentage": "10%",
                    "productUrl": "#"
                },
                {
                    "category": "Eyeglasses",
                    "topLabel": "Bestseller",
                    "image": "https://via.placeholder.com/150",
                    "brand": "Oakley",
                    "name": "Socket 5.5",
                    "price": 215,
                    "discountedPrice": null,
                    "discountPercentage": null,
                    "productUrl": "#"
                },
                {
                    "category": "Eyeglasses",
                    "topLabel": "Sale",
                    "image": "https://via.placeholder.com/150",
                    "brand": "Gucci",
                    "name": "Rectangle Frame | GG0022",
                    "price": 400,
                    "discountedPrice": 340,
                    "discountPercentage": "15%",
                    "productUrl": "#"
                },
                {
                    "category": "Prescription Sunglasses",
                    "topLabel": "Bestseller",
                    "image": "https://via.placeholder.com/150",
                    "brand": "Ray-Ban",
                    "name": "Clubmaster | RB3016",
                    "price": 250,
                    "discountedPrice": 230,
                    "discountPercentage": "8%",
                    "productUrl": "#"
                },
                {
                    "category": "Prescription Sunglasses",
                    "topLabel": "Sale",
                    "image": "https://via.placeholder.com/150",
                    "brand": "Oakley",
                    "name": "Frogskins Lite",
                    "price": 180,
                    "discountedPrice": 150,
                    "discountPercentage": "17%",
                    "productUrl": "#"
                },
                {
                    "category": "Prescription Sunglasses",
                    "topLabel": "Bestseller",
                    "image": "https://via.placeholder.com/150",
                    "brand": "Ray-Ban",
                    "name": "Erika | RB4171",
                    "price": 190,
                    "discountedPrice": null,
                    "discountPercentage": null,
                    "productUrl": "#"
                },
                {
                    "category": "Sunglasses",
                    "topLabel": "Sale",
                    "image": "https://via.placeholder.com/150",
                    "brand": "Gucci",
                    "name": "Round Metal | GG0061",
                    "price": 500,
                    "discountedPrice": 400,
                    "discountPercentage": "20%",
                    "productUrl": "#"
                },
                {
                    "category": "Sunglasses",
                    "topLabel": "Bestseller",
                    "image": "https://via.placeholder.com/150",
                    "brand": "Oakley",
                    "name": "Holbrook",
                    "price": 150,
                    "discountedPrice": 135,
                    "discountPercentage": "10%",
                    "productUrl": "#"
                },
                {
                    "category": "Sunglasses",
                    "topLabel": "Sale",
                    "image": "https://via.placeholder.com/150",
                    "brand": "Ray-Ban",
                    "name": "Wayfarer Classic | RB2140",
                    "price": 200,
                    "discountedPrice": 180,
                    "discountPercentage": "10%",
                    "productUrl": "#"
                },
                {
                    "category": "Contact Lenses",
                    "topLabel": "Bestseller",
                    "image": "https://via.placeholder.com/150",
                    "brand": "Acuvue",
                    "name": "Oasys 1-Day",
                    "price": 50,
                    "discountedPrice": 45,
                    "discountPercentage": "10%",
                    "productUrl": "#"
                },
                {
                    "category": "Contact Lenses",
                    "topLabel": "Sale",
                    "image": "https://via.placeholder.com/150",
                    "brand": "Biofinity",
                    "name": "Monthly Lenses",
                    "price": 60,
                    "discountedPrice": 50,
                    "discountPercentage": "17%",
                    "productUrl": "#"
                },
                {
                    "category": "Contact Lenses",
                    "topLabel": "Bestseller",
                    "image": "https://via.placeholder.com/150",
                    "brand": "Dailies",
                    "name": "Total 1",
                    "price": 70,
                    "discountedPrice": null,
                    "discountPercentage": null,
                    "productUrl": "#"
                },
                {
                    "category": "AI Glasses",
                    "topLabel": "Sale",
                    "image": "https://via.placeholder.com/150",
                    "brand": "TechVision",
                    "name": "Smart View Pro",
                    "price": 1200,
                    "discountedPrice": 1000,
                    "discountPercentage": "17%",
                    "productUrl": "#"
                },
                {
                    "category": "AI Glasses",
                    "topLabel": "Bestseller",
                    "image": "https://via.placeholder.com/150",
                    "brand": "VisionAI",
                    "name": "AI Glass 2.0",
                    "price": 900,
                    "discountedPrice": 850,
                    "discountPercentage": "6%",
                    "productUrl": "#"
                },
                {
                    "category": "AI Glasses",
                    "topLabel": "Sale",
                    "image": "https://via.placeholder.com/150",
                    "brand": "NextGen",
                    "name": "AR Glasses",
                    "price": 1500,
                    "discountedPrice": 1200,
                    "discountPercentage": "20%",
                    "productUrl": "#"
                }
            ]);
        };

        let swiper;

        const renderCarousel = (products) => {
            const wrapper = document.getElementById("carousel-wrapper");
            wrapper.innerHTML = "";

            products.forEach(product => {
                const slide = document.createElement("div");
                slide.classList.add("swiper-slide");

                slide.innerHTML = `
      <div class="product-card">
        ${product.topLabel ? `<div class="top-label ${product.topLabel.toLowerCase() === 'bestseller' ? 'bestseller' : ''}">${product.topLabel}</div>` : ""}
        <img src="${product.image}" alt="${product.name}" />
        <div class="brand">${product.brand}</div>
        <div class="product-name">${product.name}</div>
        <div>
          ${product.discountedPrice ? `<span class="price">$${product.price.toFixed(2)}</span><span class="discount-price">$${product.discountedPrice.toFixed(2)}</span>` : `<span class="discount-price">$${product.price.toFixed(2)}</span>`}
        </div>
        ${product.discountPercentage ? `<div class="discount-percentage">${product.discountPercentage} off</div>` : ""}
      </div>
    `;

                wrapper.appendChild(slide);
            });

            if (swiper) swiper.destroy();

            swiper = new Swiper('.swiper-container', {
                slidesPerView: 4,
                spaceBetween: 20,
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                breakpoints: {
                    768: { slidesPerView: 2 },
                    1024: { slidesPerView: 3 },
                    1200: { slidesPerView: 4 }
                }
            });
        };

        const filterAndRender = (category) => {
            fetchProducts().then(products => {
                const filtered = products.filter(p => p.category === category);
                renderCarousel(filtered);
            });
        };

        document.querySelectorAll(".category-tabs .tab").forEach(tab => {
            tab.addEventListener("click", () => {
                document.querySelectorAll(".category-tabs .tab").forEach(t => t.classList.remove("active"));
                tab.classList.add("active");
                filterAndRender(tab.dataset.category);
            });
        });

        // Initial load
        filterAndRender("Eyeglasses");
    </script>

</html>